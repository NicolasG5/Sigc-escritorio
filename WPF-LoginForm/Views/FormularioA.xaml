<Page x:Class="WPF_LoginForm.Views.FormularioA"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:WPF_LoginForm.Views"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="800"
      Title="Formulario de Atención"
      Background="Transparent">

    <Page.Resources>
        <Style x:Key="FocusVisual">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <SolidColorBrush x:Key="Button.Static.Background" Color="{StaticResource PrimaryColor}"/>
        <SolidColorBrush x:Key="Button.Static.Border" Color="{StaticResource MediumGray}"/>
        <SolidColorBrush x:Key="Button.MouseOver.Background" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="Button.MouseOver.Border" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="Button.Pressed.Background" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="Button.Pressed.Border" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="Button.Disabled.Background" Color="#FFE0E0E0"/>
        <SolidColorBrush x:Key="Button.Disabled.Border" Color="#FFADB2B5"/>
        <SolidColorBrush x:Key="Button.Disabled.Foreground" Color="#FF838383"/>
        
        <Style x:Key="BtnStyle" TargetType="{x:Type Button}">
            <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
            <Setter Property="Background" Value="{StaticResource Button.Static.Background}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Button.Static.Border}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border CornerRadius="10" x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                            <ContentPresenter x:Name="contentPresenter" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Background" TargetName="border" Value="{StaticResource Button.MouseOver.Background}"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.MouseOver.Border}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Background" TargetName="border" Value="{StaticResource Button.Pressed.Background}"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.Pressed.Border}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="border" Value="{StaticResource Button.Disabled.Background}"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource Button.Disabled.Border}"/>
                                <Setter Property="TextElement.Foreground" TargetName="contentPresenter" Value="{StaticResource Button.Disabled.Foreground}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <SolidColorBrush x:Key="TextBox.Static.Border" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="TextBox.MouseOver.Border" Color="{StaticResource SecondaryColor}"/>
        <SolidColorBrush x:Key="TextBox.Focus.Border" Color="{StaticResource AccentColor}"/>
        
        <Style x:Key="TextBox" TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{StaticResource TextBox.Static.Border}"/>
            <Setter Property="Foreground" Value="{StaticResource DarkBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="KeyboardNavigation.TabNavigation" Value="None"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Border CornerRadius="10" x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="false" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Auto"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Opacity" TargetName="border" Value="0.56"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource TextBox.MouseOver.Border}"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="true">
                                <Setter Property="BorderBrush" TargetName="border" Value="{StaticResource TextBox.Focus.Border}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Border CornerRadius="10"
            BorderThickness="1"
            Background="{StaticResource panelColor}">
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="{StaticResource winBorderColor4}" Offset="0"/>
                <GradientStop Color="{StaticResource winBorderColor5}" Offset="0.5"/>
                <GradientStop Color="{StaticResource winBorderColor4}" Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="60"/>
                </Grid.RowDefinitions>

                <!-- Título y Botón Regresar -->
                <Grid Grid.Row="0">
                    <Button x:Name="BtnRegresar"
                            Content="← Regresar"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Width="120"
                            Height="35"
                            Cursor="Hand"
                            Background="{StaticResource SecondaryBrush}"
                            Style="{DynamicResource BtnStyle}"
                            Click="Regresar"/>

                    <TextBlock Text="Formulario de Atención"
                               FontSize="28"
                               FontWeight="Bold"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Center"
                               Foreground="{StaticResource titleColor1}"/>
                </Grid>

                <!-- Tipo de Tratamiento -->
                <StackPanel Grid.Row="1" Margin="0,10">
                    <TextBlock Text="Tipo de Tratamiento *"
                               Foreground="{StaticResource titleColor1}"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBox x:Name="txtTipoTratamiento"
                             Style="{DynamicResource TextBox}"
                             Height="35"
                             VerticalContentAlignment="Center"
                             Padding="10,0"
                             FontSize="14"
                             ToolTip="Ej: Psicológico, Terapia Cognitiva, Terapia Conductual, etc."/>
                </StackPanel>

                <!-- Descripción -->
                <StackPanel Grid.Row="2" Margin="0,10">
                    <TextBlock Text="Descripción del Tratamiento *"
                               Foreground="{StaticResource titleColor1}"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBox x:Name="txtDescripcion"
                             Style="{DynamicResource TextBox}"
                             Height="100"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Padding="10"
                             FontSize="14"
                             ToolTip="Descripción detallada del tratamiento y observaciones iniciales"/>
                </StackPanel>

                <!-- Objetivos -->
                <StackPanel Grid.Row="3" Margin="0,10">
                    <TextBlock Text="Objetivos del Tratamiento *"
                               Foreground="{StaticResource titleColor1}"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <TextBox x:Name="txtObjetivos"
                             Style="{DynamicResource TextBox}"
                             Height="100"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Padding="10"
                             FontSize="14"
                             ToolTip="Objetivos terapéuticos a alcanzar durante el tratamiento"/>
                </StackPanel>

                <!-- Fechas -->
                <Grid Grid.Row="4" Margin="0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Fecha Inicio -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Fecha de Inicio *"
                                   Foreground="{StaticResource titleColor1}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                        <DatePicker x:Name="dpFechaInicio"
                                    Height="35"
                                    FontSize="14"/>
                    </StackPanel>

                    <!-- Fecha Fin Estimada -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Fecha Fin Estimada *"
                                   Foreground="{StaticResource titleColor1}"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                        <DatePicker x:Name="dpFechaFinEstimada"
                                    Height="35"
                                    FontSize="14"/>
                    </StackPanel>
                </Grid>

                <!-- Estado -->
                <StackPanel Grid.Row="5" Margin="0,10">
                    <TextBlock Text="Estado del Tratamiento"
                               Foreground="{StaticResource titleColor1}"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Margin="0,0,0,5"/>
                    <ComboBox x:Name="cboEstado"
                              Height="35"
                              FontSize="14"
                              SelectedIndex="0">
                        <ComboBoxItem Content="Activo" Tag="activo"/>
                        <ComboBoxItem Content="En Pausa" Tag="en_pausa"/>
                        <ComboBoxItem Content="Completado" Tag="completado"/>
                        <ComboBoxItem Content="Cancelado" Tag="cancelado"/>
                    </ComboBox>
                </StackPanel>

                <!-- Nota Informativa -->
                <Border Grid.Row="6" 
                        Background="{StaticResource SecondaryBrush}"
                        CornerRadius="10"
                        Padding="15"
                        Margin="0,20,0,0">
                    <StackPanel>
                        <TextBlock Text="ℹ Información Importante"
                                   Foreground="White"
                                   FontSize="14"
                                   FontWeight="Bold"
                                   Margin="0,0,0,10"/>
                        <TextBlock Text="• Este formulario registra la observación inicial del tratamiento."
                                   Foreground="White"
                                   FontSize="12"
                                   Margin="0,2"/>
                        <TextBlock Text="• Al guardar, el estado de la cita cambiará a 'Completada'."
                                   Foreground="White"
                                   FontSize="12"
                                   Margin="0,2"/>
                        <TextBlock Text="• Los campos marcados con * son obligatorios."
                                   Foreground="White"
                                   FontSize="12"
                                   Margin="0,2"/>
                    </StackPanel>
                </Border>

                <!-- Botones -->
                <StackPanel Grid.Row="7"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">
                    <Button x:Name="BtnCancelar"
                            Content="Cancelar"
                            Width="120"
                            Height="40"
                            Margin="0,0,15,0"
                            Cursor="Hand"
                            Background="{StaticResource ErrorBrush}"
                            Style="{DynamicResource BtnStyle}"
                            Click="Regresar"/>

                    <Button x:Name="BtnGuardar"
                            Content="✓ Guardar Atención"
                            Width="180"
                            Height="40"
                            Cursor="Hand"
                            Background="{StaticResource SuccessBrush}"
                            Style="{DynamicResource BtnStyle}"
                            Click="Guardar"/>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Border>
</Page>
